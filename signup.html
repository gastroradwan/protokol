<script type="module">
  import { supabase } from './supabase-config.js';

  window.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('signup-form');

    if (!form) {
      console.error('Formulář nebyl nalezen.');
      return;
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const inputs = form.querySelectorAll('input');
      const email = inputs[1].value;
      const password = inputs[2].value;

      const { data, error } = await supabase.auth.signUp({
        email: email,
        password: password
      });

      if (error) {
        alert('Registrace selhala: ' + error.message);
      } else {
        alert('Registrace proběhla úspěšně. Nyní se přihlaste.');
        window.location.href = 'login.html';
      }
    });
  });
</script>
